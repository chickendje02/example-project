FROM eclipse-temurin:11-jre-focal
ARG JARFILE
ARG USER_TIMEZONE
ARG JAVA_OPTS
ARG SERVER_PORTS

RUN apt-get install libfontconfig1 libfreetype6

ENV JARFILE=$JARFILE
ENV JAVA_OPTS=$JAVA_OPTS
ENV USER_TIMEZONE=$USER_TIMEZONE
ENV SERVER_PORTS=$SERVER_PORTS


RUN echo "Print JARFILE = $JARFILE"
RUN echo "Print JAVA_OPTS = $JAVA_OPTS"
RUN echo "Print USER_TIMEZONE = $USER_TIMEZONE"
RUN echo "Print SERVER_PORTS = $SERVER_PORTS"

ADD ./$JARFILE $JARFILE

ENTRYPOINT java -Duser.timezone=$USER_TIMEZONE -Dvertx.disableDnsResolver=true -Dserver.port=$SERVER_PORTS -jar $JARFILE